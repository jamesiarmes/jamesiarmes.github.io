<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/public/stylesheets/bs.css">
    <link rel="stylesheet" href="/public/stylesheets/styles.css">
    <link rel="stylesheet" href="/public/stylesheets/pygment_trac.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet"> 
    <link rel="canonical" href="http://jamesarmes.com/blog/2008/11/accessing-harrisdata-ibm-iseries-php">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
      <link rel="icon" type="image/x-icon"  href="/favicon.ico" />
    <title>Accessing HarrisData (IBM iSeries) In PHP | James Armes</title>
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  </head> 
  <body>
    <div class="wrapper">    
        <section>   
          <div id="title">
  <h1>
    
		  <a id="git-ic" href="https://github.com/jamesiarmes"><i class="fa fa-github"></i></a>
    

    
      <a id="so-ic" href="http://stackoverflow.com/users/62401/jamesarmes"><i class="fa fa-stack-overflow"></i></a>
    

    <a id="sitename" href="/">James Armes</a>
  </h1>

  <!-- Add something about you in p tag-->
  <!-- <p>Write something about you here...</p> -->
  <hr/>

  <span class="credits left">
  <a href="/blog">Blog</a> |
  <a href="/archive">Archive</a> |
  <a href="/resume">Resume</a> |
  <a href="/about">About</a>
</span>

<span class="credits right">

</span>


</div>



      
          <div class="post-title">
    <h1>Accessing HarrisData (IBM iSeries) In PHP</h1>
    <p class="text-muted">09 Nov 2008 | <i class="fa fa-tag"></i>
  
  
  <a class="text-muted" href="/tags/#AS/400">AS/400</a>,
  
  <a class="text-muted" href="/tags/#HarrisData">HarrisData</a>,
  
  <a class="text-muted" href="/tags/#iSeries">iSeries</a>,
  
  <a class="text-muted" href="/tags/#ODBC">ODBC</a>,
  
  <a class="text-muted" href="/tags/#PDO">PDO</a>,
  
  <a class="text-muted" href="/tags/#PHP">PHP</a>
  


</p>

</div>
            
  <p><img src="/assets/images/2008/11/harrisdata_logo.png" alt="HarrisData" class="post-image image-right" />
I have recently been working on a project to integrate with a
<a href="http://www.harrisdata.com">HarrisData</a> ERP Application. The Application runs on
an IBM iSeries (AS/400). I used PHP’s built in PDO object with the ODBC
extension. Using PDO, I was able to execute SQL Queries on the server. IBM
systems use IBM’s DB2 syntax. This entry will outline some of the basic steps,
in PHP, to communicate with the system</p>

<!--more-->

<p>I will be assuming that you already have the ODBC driver installed and setup. I
will also be assuming that your ODBC connection is called “AS400”.</p>

<p>I created a class called HarrisData. The constructor creates a PDO Object and
assigns it to a class property called $database.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$this-&gt;database = new PDO('odbc:AS400', 'USERNAME', 'password');</code></pre></figure>

<p>Method in the class can use this object to run queries on the database. For
example, let’s say we want the first 10 rows of a table called “HDCUST”.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$query = 'SELECT * FROM DBNAME.HDCUST FETCH FIRST 10 ROWS ONLY';
$results = $this-&gt;database-&gt;query($query);

// Check to make sure the query did not fail.
if (!$results) {
    return false;
}

while ($row = $results-&gt;fetch()) {
    // Do stuff...
}</code></pre></figure>

<p>I had to modify the columns being pulled several times. To make this easier and
make the code cleaner and easier to maintain, I created an array of columns to
be selected before each select statement. Note that I have placed the column
names in the array in my example, but I used constants for the actual code.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$select_array = array(
  'CMBLTO',
  'CMUDF3',
  'CMCMLU',
  'CMCUST',
  'CMSLTO',
);

$query = 'SELECT ' . implode(',', $select_array) . ' FROM DBNAME.HDCUST FETCH FIRST 10 ROWS ONLY';
$results = $this-&gt;database-&gt;query($query);</code></pre></figure>

<p>That’s all there is to it. I have not had a need to write to the database at
this time. If the need should arise, I will be sure to write a new entry about
some of the techniques I used.</p>

    
<div class="share-btns">
  
 <h4>Share this post:</h4>


 
<a class="btn btn-small btn-sm twitter" href="http://twitter.com/share?text=Accessing HarrisData (IBM iSeries) In PHP"
           onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <i class="fa fa-twitter fa-lg"></i>
          Twitter
        </a>

        <a class="btn btn-small btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <i class="fa fa-facebook fa-lg"></i>
          Facebook
        </a>

        <a class="btn btn-small btn-sm gplus"
           onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;">
          <i class="fa fa-google-plus fa-lg"></i>
          Google+
        </a>
 </a>

</div>   

<div class="comments">
   <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'jamesarmes';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    

</div> 

<div class="post-footer">
  
</div>
<hr/>


  
    <div class="post-navs row">
      
        <div class="col-md-6 post-nav">
            
          <h3 class="section-header">
            Older
            <span class="text-muted"> &middot; </span>
            <a href="/archive">View Archive (33)</a>
          </h3>
            
          <h2 class="post-title-link"><a href="/blog/2008/08/jquery-hasevent-version-100-released">JQuery hasEvent Version 1.0.0 Released</a></h2>
          <p>Today I released my first plugin for <a href="http://jquery.com/">jQuery</a>,
<a href="http://plugins.jquery.com/project/hasevent">hasEvent</a>. This plugin takes a
selector and returns true if the element contains an action on that event.</p>


        </div>
      
      
        
        <div class="col-md-6 post-nav">
          <h3 class="section-header">
            Newer
            
          </h3>
            
          <h2 class="post-title-link"><a href="/blog/2008/11/sending-mail-php-through-smtp">Sending Mail In PHP Through SMTP</a></h2>
          <p>Sending mail is a common task for many applications today. Whether sending mail
through a webform or as an automated tasks, sending mail can be simple using PHP
and PEAR. Using the sendMail() function below, you can send HTML formatted mail
through any smtp server.</p>


        </div>
      
    </div>
  

 

          <footer>
<hr/>
  <div class="left">
    &copy;2016
    James Armes.
  </div>

  <div class="right">
    
      <a href="https://twitter.com/jamesiarmes"><i class="fa fa-twitter fa-lg" style="color:#49B1F7;"></i></a>
    </a>
    
  </div>
</footer>

        </section>
    </div>   
    </div>
    <script src="/public/javascripts/jquery.min.js"></script>
    <script src="/public/javascripts/bootstrap.min.js"></script>
    <!-- disqus comment counter -->
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'jamesarmes';

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function () {
	    var s = document.createElement('script'); s.async = true;
	    s.type = 'text/javascript';
	    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
	    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
	}());
</script>
<!-- /disqus comment counter -->



<!-- google analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3412924-2', 'auto');
  ga('send', 'pageview');

</script>
<!-- /google analytics -->

  </body>
</html>
