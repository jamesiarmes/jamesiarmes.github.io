<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="stylesheet" href="/public/stylesheets/bs.css"> <link rel="stylesheet" href="/public/stylesheets/styles.css"> <link rel="stylesheet" href="/public/stylesheets/pygment_trac.css"> <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet"> <link rel="canonical" href="http://jamesarmes.com/blog/2009/09/using-workxpress-api-lookupdata"> <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> <link rel="icon" type="image/x-icon" href="/favicon.ico"/> <title>Using the WorkXpress API: LookupData | James Armes</title> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script> <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]--> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> </head> <body> <div class="wrapper"> <section> <div id="title"> <h1> <a id="git-ic" href="https://github.com/jamesiarmes"><i class="fa fa-github"></i></a> <a id="so-ic" href="http://stackoverflow.com/users/62401/jamesarmes"><i class="fa fa-stack-overflow"></i></a> <a id="sitename" href="/">James Armes</a> </h1> <hr/> <span class="credits left"> <a href="/blog">Blog</a> | <a href="/archive">Archive</a> | <a href="/resume">Resume</a> | <a href="/about">About</a> </span> <span class="credits right"> </span> </div> <div class="post-title"> <h1>Using the WorkXpress API: LookupData</h1> <p class="text-muted">02 Sep 2009 | <i class="fa fa-tag"></i> <a class="text-muted" href="/tags/#API">API</a>, <a class="text-muted" href="/tags/#PHP">PHP</a>, <a class="text-muted" href="/tags/#SOAP">SOAP</a>, <a class="text-muted" href="/tags/#Web Services">Web Services</a>, <a class="text-muted" href="/tags/#WorkXpress">WorkXpress</a> </p> </div> <p><a href="http://www.workxpress.com"><img src="/assets/images/workxpress-logo.png" alt="WorkXpress" class="post-image image-right"/></a> Last week I introduced you to the <a href="/blog/2009/07/introducing-workxpress-api">WorkXpress API</a>. If you have not read it already you should do so before reading this post. Once you have a basic understanding of what it is and how it works, it’s time to start diving into the API.</p> <p>This post will cover how to read data from a WorkXpress Application using the LookupData function. LookupData allows you to retrieve values from items and relationships. If you know the item or relation id, you can retrieve the data directly from the Item. If you don’t have an id, you can use a map to search for items and relationships. The WorkXpress API allows you to make many LookupData requests in the same function call using data sets.</p> <h3 id="request-xml">Request XML</h3> <p>First, let’s get an understanding of how the request XML should be formed.</p> <table class="workxpress-table"> <thead> <tr> <th>Element</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>/wxRequest</td> <td>The root node for all request documents.</td> </tr> <tr> <td>/wxRequest/dataSet</td> <td> Contains a single LookupData request. You may have as many data sets as you would like. <br/><br/> <em>Attributes:</em> <ul> <li> reference (string): An identifier that will be returned in the request document to distinguish between different data sets. If this attribute is left blank, a random string will be generated. </li> </ul> </td> </tr> <tr> <td>/wxRequest/dataSet/items</td> <td>Root node for the items that should be retrieved.</td> </tr> <tr> <td>/wxRequest/dataSet/items/item</td> <td> A single item to be retrieved. There is no limit to the number of item nodes allowed in a data set. <br/><br/> <em>Attributes:</em> <ul> <li> itemId (string): The item id of the item to retrieve data from. Should be in the format u# (ie. u123). </li> </ul> </td> </tr> <tr> <td>/wxRequest/dataSet/items/map</td> <td>The root node for a map definition.</td> </tr> <tr> <td>/wxRequest/dataSet/items/map/definition</td> <td> The actual definition for a map. The map XML must have its HTML entities encoded. </td> </tr> <tr> <td>/wxRequest/dataSet/fields</td> <td> Root node for the fields that should be read from the items that were found in the items node. </td> </tr> <tr> <td>/wxRequest/dataSet/fields/field</td> <td> A single field to read data from. <br/><br/> <em>Attributes:</em> <ul> <li> fieldId (string): Id of the field containing the data you wish to pull. Should be in the format a# (ie. a123). </li> <li> reference (string): An identifier that will be returned with the response to identify each field. </li> </ul> </td> </tr> <tr> <td>/wxRequest/dataSet/fields/field/format</td> <td> Display format for the defined field. Display formats will be explained in a later post. For now we will pull the "text" value of all fields. <br/><br/> <em>Attributes:</em> <ul> <li> type (string): The type of format that should be returned. Must be one of the following: <ul> <li> html: Includes any HTML used when rendering the Field in view mode within the Application. </li> <li> stored: The format of the field when it is stored in the WorkXpress database. This may contain XML for multi-part fields, item ids for item pickers, etc. Stay tuned for a future post on special field values. </li> <li> text: Returns the plain text value. This is the recommended format. </li> </ul> </li> </ul> </td> </tr> <tr> <td>/wxRequest/dataSet/relations</td> <td> Root node for relations that should be looked up from the items found in the items node. </td> </tr> <tr> <td>/wxRequest/dataSet/relations/relation</td> <td> Root node for relations that should be looked up from the items found in the items node. <br/><br/> <em>Attributes:</em> <ul> <li> relationType (string): Id of the relation type to search for. Should be in the format a# (ie. a123). </li> <li> from (string): Defines which side of the relation that the search should start from. Valid values are base and target. </li> <li> reference (string): An identifier that will be returned with the response to identify each relation. </li> </ul> </td> </tr> <tr> <td>/wxRequest/dataSet/relations/relation/fields</td> <td> Root node for the fields that should be read from the relations that were found in the items node. </td> </tr> <tr> <td>/wxRequest/dataSet/relations/relation/fields/field</td> <td> A single field to read data from. <br/><br/> <em>Attributes:</em> <ul> <li> fieldId (string): Id of the field containing the data you wish to pull. Should be in the format a# (ie. a123). </li> <li> reference (string): An identifier that will be returned with the response to identify each field. </li> </ul> </td> </tr> <tr> <td>/wxRequest/dataSet/relations/relation/fields/field/format</td> <td> Display format for the defined field. Display formats will be explained in a later post. For now we will pull the "text" value of all fields. <br/><br/> <em>Attributes:</em> <ul> <li> type (string): The type of format that should be returned. Must be one of the following: <ul> <li> html: Includes any HTML used when rendering the Field in view mode within the Application. </li> <li> stored: The format of the field when it is stored in the WorkXpress database. This may contain XML for multi-part fields, item ids for item pickers, etc. Stay tuned for a future post on special field values. </li> <li> text: Returns the plain text value. This is the recommended format. </li> </ul> </li> </ul> </td> </tr> </tbody> </table> <h3 id="response-xml">Response XML</h3> <p>Now let’s get an understanding of how the response XML will be formed.</p> <table class="workxpress-table"> <thead> <tr> <th>Element</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>/wxResponse</td> <td>The root node for all response documents.</td> </tr> <tr> <td>/wxRequest/callStatus</td> <td> The status of the SOAP call as it was processed by WorkXpress. <br/><br/> <em>Attributes:</em> <ul> <li> status (string): The call's status. Values include success and failure. </li> </ul> </td> </tr> <tr> <td>/wxResponse/compatibilityLevel</td> <td>The version of the API that was used to process the request.</td> </tr> <tr> <td>/wxRequest/dataSet</td> <td> One data set is returned for each data set in the request document. <br/><br/> <em>Attributes:</em> <ul> <li> reference (string): The identifier that was assigned to the data set in the request. </li> </ul> </td> </tr> <tr> <td>/wxRequest/dataSet/item</td> <td> A single item found based on the items defined in the request. <br/><br/> <em>Attributes:</em> <ul> <li> itemId (string): The item id of the item that was found, in the format u# (ie. u123). </li> </ul> </td> </tr> <tr> <td>/wxRequest/dataSet/item/field</td> <td> A single field that was retrieved based on the request. <br/><br/> <em>Attributes:</em> <ul> <li> fieldId (string): Id of the field, in the format a# (ie. a123). </li> <li> reference (string): The identifier that was assigned to the field in the request document. </li> </ul> </td> </tr> <tr> <td>/wxRequest/dataSet/item/field/value</td> <td> The value of the current field, in the format defined in the request. </td> </tr> <tr> <td>/wxRequest/dataSet/item/relation</td> <td> Contains the data for a single relation that was found. <br/><br/> <em>Attributes:</em> <ul> <li> relationType (string): Id of the relation type for the current relation, in the format a# (ie. a123). </li> <li> id (string): Id of the current relation, in the format u# (ie. u123). </li> <li> reference (string): The identifier of the relation that was assigned to the relation in the request. </li> <li> baseItemTypeId (string): Item type id of the item on the base side of the relation, in the format a# (ie. a123). </li> <li> baseItemId (string): Item id of the item on the base side of the relation, in the format u# (ie. u123). </li> <li> targetItemTypeId (string): Item type id of the item on the target side of the relation, in the format a# (ie. a123). </li> <li> targetItemId (string): Item id of the item on the target side of the relation, in the format u# (ie. u123). </li> </ul> </td> </tr> <tr> <td>/wxRequest/dataSet/item/relation/field</td> <td> A single field that was retrieved based on the request. <br/><br/> <em>Attributes:</em> <ul> <li> fieldId (string): Id of the field, in the format a# (ie. a123). </li> <li> reference (string): The identifier that was assigned to the field in the request document. </li> </ul> </td> </tr> <tr> <td>/wxRequest/dataSet/item/relation/field/value</td> <td> The value of the current field, in the format defined in the request. </td> </tr> </tbody> </table> <h3 id="examples">Examples</h3> <p>Below is an example of a basic LookupData request document:</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;wxrequest&gt;</span>
  <span class="nt">&lt;dataset</span> <span class="na">reference=</span><span class="s">"accounts"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;items&gt;&lt;map&gt;</span>
        <span class="nt">&lt;definition&gt;</span>
          <span class="ni">&amp;amp;</span>lt;?xml version="1.0" encoding="UTF-8"?<span class="ni">&amp;amp;</span>gt;
          <span class="ni">&amp;amp;</span>lt;wxQuery xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="wxQuery.xsd" id="root"<span class="ni">&amp;amp;</span>gt;
            <span class="ni">&amp;amp;</span>lt;data for="root"<span class="ni">&amp;amp;</span>gt;
              <span class="ni">&amp;amp;</span>lt;item/<span class="ni">&amp;amp;</span>gt;
            <span class="ni">&amp;amp;</span>lt;/data<span class="ni">&amp;amp;</span>gt;
            <span class="ni">&amp;amp;</span>lt;startingTypes<span class="ni">&amp;amp;</span>gt;
              <span class="ni">&amp;amp;</span>lt;startingType<span class="ni">&amp;amp;</span>gt;a35234<span class="ni">&amp;amp;</span>lt;/startingType<span class="ni">&amp;amp;</span>gt;
            <span class="ni">&amp;amp;</span>lt;/startingTypes<span class="ni">&amp;amp;</span>gt;
          <span class="ni">&amp;amp;</span>lt;/wxQuery<span class="ni">&amp;amp;</span>gt;
        <span class="nt">&lt;/definition&gt;&lt;/map&gt;</span>
    <span class="nt">&lt;/items&gt;</span>
    <span class="nt">&lt;fields&gt;</span>
      <span class="nt">&lt;field</span> <span class="na">fieldid=</span><span class="s">"a66969"</span> <span class="na">reference=</span><span class="s">"name"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;format</span> <span class="na">type=</span><span class="s">"text"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/format&gt;&lt;/field&gt;</span>
    <span class="nt">&lt;/fields&gt;</span>
    <span class="nt">&lt;relations&gt;</span>
      <span class="nt">&lt;relation</span> <span class="na">from=</span><span class="s">"base"</span> <span class="na">reference=</span><span class="s">"account_to_contact"</span> <span class="na">relationtype=</span><span class="s">"a36495"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;fields&gt;</span>
          <span class="nt">&lt;field</span> <span class="na">fieldid=</span><span class="s">"a36498"</span> <span class="na">reference=</span><span class="s">"position"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;format</span> <span class="na">type=</span><span class="s">"text"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;/format&gt;&lt;/field&gt;</span>
        <span class="nt">&lt;/fields&gt;</span>
      <span class="nt">&lt;/relation&gt;</span>
    <span class="nt">&lt;/relations&gt;</span>
  <span class="nt">&lt;/dataset&gt;</span>
<span class="nt">&lt;/wxresponse&gt;</span></code></pre></figure> <p>Below is the corresponding response document for the above example:</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;wxresponse&gt;</span>
  <span class="nt">&lt;callstatus</span> <span class="na">status=</span><span class="s">"success"</span><span class="nt">&gt;&lt;/callstatus&gt;</span>
  <span class="nt">&lt;compatibilitylevel&gt;</span>1<span class="nt">&lt;/compatibilitylevel&gt;</span>
  <span class="nt">&lt;dataset</span> <span class="na">reference=</span><span class="s">"accounts"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">itemid=</span><span class="s">"u7324"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;field</span> <span class="na">fieldid=</span><span class="s">"a66969"</span> <span class="na">reference=</span><span class="s">"name"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;value&gt;</span>WorkXpress<span class="nt">&lt;/value&gt;</span>
      <span class="nt">&lt;/field&gt;</span>
      <span class="nt">&lt;relation</span> <span class="na">baseitemid=</span><span class="s">"u7324"</span> <span class="na">baseitemtypeid=</span><span class="s">"a35234"</span> <span class="na">id=</span><span class="s">"u7437"</span> <span class="na">reference=</span><span class="s">"account_to_contact"</span> <span class="na">relationtype=</span><span class="s">"a36495"</span> <span class="na">targetitemid=</span><span class="s">"u7436"</span> <span class="na">targetitemtypeid=</span><span class="s">"a35334"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">fieldid=</span><span class="s">"a36498"</span> <span class="na">reference=</span><span class="s">"position"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;value&gt;</span>Developer<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/field&gt;</span>
      <span class="nt">&lt;/relation&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
  <span class="nt">&lt;/dataset&gt;</span>
<span class="nt">&lt;/wxresponse&gt;</span></code></pre></figure> <p>If you have any questions or would like assistance making some LookupData requests of your own, please feel free to comment below. My next post will be on how to use the AddItem request.</p> <div class="share-btns"> <h4>Share this post:</h4> <a class="btn btn-small btn-sm twitter" href="http://twitter.com/share?text=Using the WorkXpress API: LookupData" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;"> <i class="fa fa-twitter fa-lg"></i> Twitter </a> <a class="btn btn-small btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;"> <i class="fa fa-facebook fa-lg"></i> Facebook </a> <a class="btn btn-small btn-sm gplus" onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;"> <i class="fa fa-google-plus fa-lg"></i> Google+ </a> </a> </div> <div class="comments"> <div id="disqus_thread"></div> <script type="text/javascript">var disqus_shortname="jamesarmes";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a> </div> <div class="post-footer"> </div> <hr/> <div class="post-navs row"> <div class="col-md-6 post-nav"> <h3 class="section-header"> Older <span class="text-muted"> &middot; </span> <a href="/archive">View Archive (33)</a> </h3> <h2 class="post-title-link"><a href="/blog/2009/07/introducing-workxpress-api">Introducing the WorkXpress API</a></h2> <p><a href="http://www.workxpress.com"><img src="/assets/images/workxpress-logo.png" alt="WorkXpress" class="post-image image-right"/></a> I recently finished documenting the <a href="http://www.workxpress.com">WorkXpress</a> API and thought I would share some of the details. First of all, the documentation can be downloaded at <a href="http://www.workxpress.com/sites/default/files/WorkXpress%20API_1.pdf">http://www.workxpress.com/sites/default/files/WorkXpress%20API_1.pdf</a> (PDF). For PHP, there is a PEAR package that makes working with the API easier. Look for that in a later post.</p> </div> <div class="col-md-6 post-nav"> <h3 class="section-header"> Newer </h3> <h2 class="post-title-link"><a href="/blog/2009/09/using-workxpress-api-additem">Using the WorkXpress API: AddItem</a></h2> <p><a href="http://www.workxpress.com"><img src="/assets/images/workxpress-logo.png" alt="WorkXpress" class="post-image image-right"/></a> Earlier I introduced you to the <a href="/blog/2009/07/introducing-workxpress-api">WorkXpress API</a>. If you have not read it already you should do so before reading this post. Once you have a basic understanding of what it is and how it works, it’s time to start diving into the API.</p> </div> </div> <footer> <hr/> <div class="left"> &copy;2016 James Armes. </div> <div class="right"> <a href="https://twitter.com/jamesiarmes"><i class="fa fa-twitter fa-lg" style="color:#49B1F7;"></i></a> </a> </div> </footer> </section> </div> </div> <script src="/public/javascripts/jquery.min.js"></script> <script src="/public/javascripts/bootstrap.min.js"></script> <script type="text/javascript">var disqus_shortname="jamesarmes";!function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript",e.src="//"+disqus_shortname+".disqus.com/count.js",(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(e)}();</script> <script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-3412924-2","auto"),ga("send","pageview");</script> </body> </html>