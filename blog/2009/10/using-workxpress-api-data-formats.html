<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="stylesheet" href="/public/stylesheets/bs.css"> <link rel="stylesheet" href="/public/stylesheets/styles.css"> <link rel="stylesheet" href="/public/stylesheets/pygment_trac.css"> <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet"> <link rel="canonical" href="http://jamesarmes.com/blog/2009/10/using-workxpress-api-data-formats"> <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> <link rel="icon" type="image/x-icon" href="/favicon.ico"/> <title>Using the WorkXpress API: Data Formats | James Armes</title> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script> <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]--> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> </head> <body> <div class="wrapper"> <section> <div id="title"> <h1> <a id="git-ic" href="https://github.com/jamesiarmes"><i class="fa fa-github"></i></a> <a id="so-ic" href="http://stackoverflow.com/users/62401/jamesarmes"><i class="fa fa-stack-overflow"></i></a> <a id="sitename" href="/">James Armes</a> </h1> <hr/> <span class="credits left"> <a href="/blog">Blog</a> | <a href="/archive">Archive</a> | <a href="/resume">Resume</a> | <a href="/about">About</a> </span> <span class="credits right"> </span> </div> <div class="post-title"> <h1>Using the WorkXpress API: Data Formats</h1> <p class="text-muted">26 Oct 2009 | <i class="fa fa-tag"></i> <a class="text-muted" href="/tags/#API">API</a>, <a class="text-muted" href="/tags/#PHP">PHP</a>, <a class="text-muted" href="/tags/#SOAP">SOAP</a>, <a class="text-muted" href="/tags/#Web Services">Web Services</a>, <a class="text-muted" href="/tags/#WorkXpress">WorkXpress</a> </p> </div> <p><a href="http://www.workxpress.com"><img src="/assets/images/workxpress-logo.png" alt="WorkXpress" class="post-image image-right"/></a> Now that you know how to use the <a href="http://www.workxpress.com">WorkXpress</a> API, it’s time to learn about some more advanced concepts. Data formats define how Field values are stored within WorkXpress. These values can be useful for finding out more information about certain values, and will need to be used when storing data into certain Field Types.</p> <p>The WorkXpress Engine tries hard to store data in simple, easy, logical formats. Below is a description of some of the less straightforward Field Types, and what format their data is expected in.</p> <h2 id="item-pickers">Item Pickers</h2> <p><a href="http://www.workxpress.com/training/library/item-picker-select-one">Item Picker</a> Fields store references to other Items. They can be used to manage Relationships, display links and other Fields attached to the referenced Item or to simply reference the Item in Actions.</p> <p>Item Pickers are split into two primary types: single and multi. Single Item Pickers store a reference to only one Item at a time. Multi Item Pickers can store a reference to multiple Items at a time. Each of these types of Item Pickers is then broken down into Select Item Pickers and Pick Item Pickers. Select Item Pickers display as either a single select box or a multi-select Field. Single and Multi Item Pickers have slightly different stored values; however, there is no difference in the stored value of Select Item Pickers and Pick Item Pickers.</p> <p>Single Item Pickers store their value as follows:</p> <figure class="highlight"><pre><code class="language-console" data-lang="console">&lt;ItemTypeId&gt;|&lt;ItemId&gt;
<span class="err">a1325|u15</span></code></pre></figure> <p>Multi Item Pickers store their value as follows:</p> <figure class="highlight"><pre><code class="language-console" data-lang="console">&lt;ItemTypeId&gt;|&lt;ItemId&gt;,&lt;ItemTypeId&gt;|&lt;ItemId&gt;,...
<span class="err">a1325|u15,a1325|u28,a1325|u193</span></code></pre></figure> <h2 id="selects">Selects</h2> <p><a href="http://www.workxpress.com/training/library/select-one">Select</a> Fields are very similar to Item Picker Fields. They are split into single and multi selects. Select also store Items; however, they only store Items of type “Select Option” and these Items are pre-defined and related to the Field. The Item Type id of Select Options is e11, so all Select Field values will be prefixed with this id.</p> <p>Single Selects store their value as follows:</p> <figure class="highlight"><pre><code class="language-console" data-lang="console">e11|&lt;ItemId&gt;
<span class="err">e11|a32859</span></code></pre></figure> <p>Multi Selects store their value as follows:</p> <figure class="highlight"><pre><code class="language-console" data-lang="console">e11|&lt;ItemId&gt;,e11|&lt;ItemId&gt;,...
<span class="err">e11|a49462,e11|a28957,e11|a1337</span></code></pre></figure> <p>Select Fields can also be set by passing in the title or alt title of the Select Option(s). For example let’s say you the two options below available for a Single Select:</p> <div class="image-caption"> <img src="/assets/images/2009/10/selectoptions.png" alt="Select Options"/> <div> Select Options </div> </div> <p>You could set this Field to the value “Open” by passing in either “Open” or “O”. For Multi Selects, you can mix and match the values. If the previous example was a Multi Select Field, you could set it by passing in “Open,C” or even “O,e11|a295456”.</p> <h2 id="check-box">Check Box</h2> <p><a href="http://www.workxpress.com/training/library/checkbox">Checkbox</a> Fields work like boolean values. When a check box Field is “on” or “true”, the stored value will be 1. Any non-empty value may be passed in to set a check box to “on”. When a check box Field is “off” or “false”, the stored value will be empty. An empty value should be passed in to set a check box to “off”.</p> <h2 id="date-time-amp-date-time">Date, Time &amp; Date Time</h2> <p><a href="http://www.workxpress.com/training/library/date">Date</a>, <a href="http://www.workxpress.com/training/library/time">Time</a> and <a href="http://www.workxpress.com/training/library/date-and-time">Date Time</a> Fields are all stored as a Unix time stamp. A <a href="http://en.wikipedia.org/wiki/Unix_timestamp">Unix time stamp</a> represents the number of seconds since the Unix epoch (January 1, 1970), excluding leap seconds. This makes adding and subtracting time a simple arithmetic operation. PHP can easily handle and manipulate these values using its built in <a href="date">date</a> functions.</p> <figure class="highlight"><pre><code class="language-php" data-lang="php">// Convert a standard date into a unix time stamp and back again.
$value = '01/29/1985';
$timestamp = strtotime($date);
$formatted = date('m/d/Y');

// Convert a date and time value into a unix time stamp and back again.
$value = '01/29/1985 11:35am';
$timestamp = strtotime($date);
$formatted = date('m/d/Y h:ia');

// Convert a time only value into a unix time stamp and back again.
$value = '11:35am';
$timestamp = strtotime('January 1, 1970 '.$time);
$formatted = date('h:ia');</code></pre></figure> <h2 id="file-attachment">File Attachment</h2> <p><a href="http://www.workxpress.com/training/library/file-attachment">File Attachment</a> Fields are what WorkXpress refers to as a multi-part Field. Multi-part Fields are stored as XML so that each part can be referenced separately. There are two different ways of setting a File Attachment Field though the API:</p> <ul> <li>Pass in XML with the encoded_file and filename parts set</li> <li>Pass in XML with the download_url set</li> </ul> <p>To base 64 encode a file in PHP, use the code below:</p> <figure class="highlight"><pre><code class="language-php" data-lang="php">$filename = '/home/jarmes/example.png';
$binary_data = file_get_contents($filename);
$encoded_file = base64_encode($binary_data);

// This could also be done on one line.
$encoded_file = base64_encode(file_get_contents('/home/jarmes/example.png'));</code></pre></figure> <p>The XML for a File Attachment Field should be structured using the below definition:</p> <table class="workxpress-table"> <thead> <tr> <th>Element</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>/multi_part_field</td> <td>The root node for all multi-part Fields.</td> </tr> <tr> <td>/multi_part_field/part</td> <td> Defines the value for a single part of the Field. <br/><br/> <em>Attributes:</em> <ul> <li> id (string): Id of the current part. Valid values for File Attachment Fields include: <ul> <li> filename: The filename to be given to the file when it is saved on the WorkXpress file system. </li> <li>mime_type: The mime-type of the file (ie. image/jpeg).</li> <li>size: The file's size in bytes.</li> <li> encoded_file: The base 64 encoded binary data of the file. </li> <li> download_url: When retrieving a stored value, this will have a URL that can be used to download the file. If the Field is not configured to allow public files, this URL will require a valid login to the application. When setting a Field, this value may be set to a URL that WorkXpress should use to retrieve the file. </li> </ul> </li> </ul> </td> </tr> </tbody> </table> <p>Example:</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;multi_part_field&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"filename"</span><span class="nt">&gt;</span>example.png<span class="nt">&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"mime_type"</span><span class="nt">&gt;</span>image/png<span class="nt">&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"size"</span><span class="nt">&gt;</span>364544<span class="nt">&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"encoded_file"</span><span class="nt">&gt;</span>$encoded_file<span class="nt">&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"download_url"</span><span class="nt">&gt;</span>http://www.example.com/example.png<span class="nt">&lt;/part&gt;</span>
<span class="nt">&lt;/multi_part_field&gt;</span></code></pre></figure> <h2 id="address">Address</h2> <p><a href="http://www.workxpress.com/training/library/address">Address</a> Fields are also multi-part. Address Fields have two different types: US and International. If the “type” part of an address value is not set, it is assumed to be US.</p> <p>The XML for an Address Field should be structured using the below definition:</p> <table class="workxpress-table"> <thead> <tr> <th>Element</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>/multi_part_field</td> <td>The root node for all multi-part Fields.</td> </tr> <tr> <td>/multi_part_field/part</td> <td> Defines the value for a single part of the Field. <br/><br/> <em>Attributes:</em> <ul> <li> id (string): Id of the current part. Valid values for Address Fields include: <ul> <li>street: The first street value.</li> <li>street2: The second street value.</li> <li> street: The third street value (International values only). </li> <li>city: The city value.</li> <li> state: The state value. International values may have up to three characters. US values must have exactly two characters. </li> <li> zip_code: The postal code value. Should be five character numeric for US values. </li> <li> country: The country value. This value is required for International values. United States will be used for US values regardless of any value passed in. Should be the full country name (ie. Canada, South Africa) or the <a href="http://en.wikipedia.org/wiki/ISO_3166-1_alpha-3#Officially_assigned_code_elements">ISO 3166-1 alpha-3</a> formatted country code. </li> <li>type: Should be either International or United States.</li> <li> sort_value: Defines which street part will be used when sorting this value. Valid values include street, street2, and street3. This part is required for International values. US values will always use street. </li> </ul> </li> </ul> </td> </tr> </tbody> </table> <p>Example:</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;multi_part_field&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"street"</span><span class="nt">&gt;</span>Ostvorstadt<span class="nt">&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"street2"</span><span class="nt">&gt;</span>Hauptstraße 5<span class="nt">&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"street3"</span><span class="nt">&gt;&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"city"</span><span class="nt">&gt;</span>Musterstadt<span class="nt">&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"state"</span><span class="nt">&gt;&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"zip_code"</span><span class="nt">&gt;</span>01234<span class="nt">&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"country"</span><span class="nt">&gt;</span>Germany<span class="nt">&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"type"</span><span class="nt">&gt;</span>International<span class="nt">&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"sort_value"</span><span class="nt">&gt;</span>street2<span class="nt">&lt;/part&gt;</span>
<span class="nt">&lt;/multi_part_field&gt;</span></code></pre></figure> <h2 id="phone-number">Phone Number</h2> <p><a href="http://www.workxpress.com/training/library/phone-number">Phone Number</a> Fields are the last of the multi-part Fields. Like Address Fields, Phone Numbers can have two types: International and US. If the “type” part is not defined, it is assumed to be US.</p> <p>The XML for a Phone Number Field should be structured using the below definition:</p> <table class="workxpress-table"> <thead> <tr> <th>Element</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>/multi_part_field</td> <td>The root node for all multi-part Fields.</td> </tr> <tr> <td>/multi_part_field/part</td> <td> Defines the value for a single part of the Field. <br/><br/> <em>Attributes:</em> <ul> <li> id (string): Id of the current part. Valid values for Phone Number Fields include: <ul> <li> area_code: The area code value. Should be three digits for US values and up to five alpha-numeric characters for International values. </li> <li> prefix: The first three digits of a US phone number (US values only). </li> <li> line_numer: The last four digits of a US phone number. For International values, this is used for the remainder of the phone number (everything after the area code). </li> <li> extension: The optional extension value. Phone Number Fields can be set up to not display this value even if it has been set. </li> <li> country_code: The country calling code for International values. This will always be set to 1 for US values. </li> <li>type: Should be either International or United States.</li> </ul> </li> </ul> </td> </tr> </tbody> </table> <p>Example:</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;multi_part_field&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"area_code"</span><span class="nt">&gt;</span>717<span class="nt">&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"prefix"</span><span class="nt">&gt;</span>609<span class="nt">&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"line_number"</span><span class="nt">&gt;</span>0029<span class="nt">&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"extension"</span><span class="nt">&gt;</span>123<span class="nt">&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"country_code"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/part&gt;</span>
  <span class="nt">&lt;part</span> <span class="na">id=</span><span class="s">"type"</span><span class="nt">&gt;</span>United States<span class="nt">&lt;/part&gt;</span>
<span class="nt">&lt;/multi_part_field&gt;</span></code></pre></figure> <p>That’s it for the WorkXpress Data Formats. All other Fields use simple storage types (ie. Currency stores as a number, Short Text stores as text). If you have any questions about these data formats, please feel free to leave a comment below. My next and final post on the WorkXpress API will cover display formats.</p> <div class="share-btns"> <h4>Share this post:</h4> <a class="btn btn-small btn-sm twitter" href="http://twitter.com/share?text=Using the WorkXpress API: Data Formats" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;"> <i class="fa fa-twitter fa-lg"></i> Twitter </a> <a class="btn btn-small btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;"> <i class="fa fa-facebook fa-lg"></i> Facebook </a> <a class="btn btn-small btn-sm gplus" onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;"> <i class="fa fa-google-plus fa-lg"></i> Google+ </a> </a> </div> <div class="comments"> <div id="disqus_thread"></div> <script type="text/javascript">var disqus_shortname="jamesarmes";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a> </div> <div class="post-footer"> </div> <hr/> <div class="post-navs row"> <div class="col-md-6 post-nav"> <h3 class="section-header"> Older <span class="text-muted"> &middot; </span> <a href="/archive">View Archive (33)</a> </h3> <h2 class="post-title-link"><a href="/blog/2009/10/using-workxpress-api-executeaction">Using the WorkXpress API: ExecuteAction</a></h2> <p><a href="http://www.workxpress.com"><img src="/assets/images/workxpress-logo.png" alt="WorkXpress" class="post-image image-right"/></a> Earlier I introduced you to the <a href="/blog/2009/07/introducing-workxpress-api">WorkXpress API</a>. If you have not read it already you should do so before reading this post. Once you have a basic understanding of what it is and how it works, it’s time to start diving into the API.</p> </div> <div class="col-md-6 post-nav"> <h3 class="section-header"> Newer </h3> <h2 class="post-title-link"><a href="/blog/2009/12/external-links-and-geshi-filter">External Links and GeSHi Filter</a></h2> <p>On my site I use the <a href="http://drupal.org/project/extlink">External links</a> to add the <img src="/assets/images/2009/12/extlink.png" alt="external link icon"/> image next to any external links. I also use the <a href="http://drupal.org/project/geshifilter">GeSHi Filter</a> module for syntax highlighting. These two modules together were causing some undesirable effects.</p> </div> </div> <footer> <hr/> <div class="left"> &copy;2016 James Armes. </div> <div class="right"> <a href="https://twitter.com/jamesiarmes"><i class="fa fa-twitter fa-lg" style="color:#49B1F7;"></i></a> </a> </div> </footer> </section> </div> </div> <script src="/public/javascripts/jquery.min.js"></script> <script src="/public/javascripts/bootstrap.min.js"></script> <script type="text/javascript">var disqus_shortname="jamesarmes";!function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript",e.src="//"+disqus_shortname+".disqus.com/count.js",(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(e)}();</script> <script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-3412924-2","auto"),ga("send","pageview");</script> </body> </html>