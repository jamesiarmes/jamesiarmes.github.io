<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/public/stylesheets/bs.css">
    <link rel="stylesheet" href="/public/stylesheets/styles.css">
    <link rel="stylesheet" href="/public/stylesheets/pygment_trac.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet"> 
    <link rel="canonical" href="http://jamesarmes.com/blog/2009/10/using-workxpress-api-updateitem">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
      <link rel="icon" type="image/x-icon"  href="/favicon.ico" />
    <title>Using the WorkXpress API: UpdateItem | James Armes</title>
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  </head> 
  <body>
    <div class="wrapper">    
        <section>   
          <div id="title">
  <h1>
    
		  <a id="git-ic" href="https://github.com/jamesiarmes"><i class="fa fa-github"></i></a>
    

    
      <a id="so-ic" href="http://stackoverflow.com/users/62401/jamesarmes"><i class="fa fa-stack-overflow"></i></a>
    

    <a id="sitename" href="/">James Armes</a>
  </h1>

  <!-- Add something about you in p tag-->
  <!-- <p>Write something about you here...</p> -->
  <hr/>

  <span class="credits left">
  <a href="/blog">Blog</a> |
  <a href="/archive">Archive</a> |
  <a href="/resume">Resume</a> |
  <a href="/about">About</a>
</span>

<span class="credits right">

</span>


</div>



      
          <div class="post-title">
    <h1>Using the WorkXpress API: UpdateItem</h1>
    <p class="text-muted">21 Oct 2009 | <i class="fa fa-tag"></i>
  
  
  <a class="text-muted" href="/tags/#API">API</a>,
  
  <a class="text-muted" href="/tags/#PHP">PHP</a>,
  
  <a class="text-muted" href="/tags/#SOAP">SOAP</a>,
  
  <a class="text-muted" href="/tags/#Web Services">Web Services</a>,
  
  <a class="text-muted" href="/tags/#WorkXpress">WorkXpress</a>
  


</p>

</div>
            
  <p><a href="http://www.workxpress.com"><img src="/assets/images/workxpress-logo.png" alt="WorkXpress" class="post-image image-right" /></a>
Earlier I introduced you to the
<a href="/blog/2009/07/introducing-workxpress-api">WorkXpress API</a>. If
you have not read it already you should do so before reading this post. Once you
have a basic understanding of what it is and how it works, it’s time to start
diving into the API.</p>

<!--more-->

<p>This post will cover how to update existing Items in a WorkXpress application
using the UpdateItem API function. UpdateItem allows you to set Fields, create
Relationships and recycle and delete Items &amp; Relationships. Like the other
functions, you can make many UpdateItem requests in one call using data sets.</p>

<h3 id="request-xml">Request XML</h3>
<p>First, let’s get an understanding of how the request XML should be formed.</p>

<table class="workxpress-table">
	<thead>
		<tr>
			<th>Element</th>
			<th>Description</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>/wxRequest</td>
			<td>The root node for all request documents.</td>
		</tr>
		<tr>
			<td>/wxRequest/dataSet</td>
			<td>
			  Contains a single UpdateItem request. You may have as many data sets as
			  you would like.
			  <br /><br />
				<em>Attributes:</em>
				<ul>
				  <li>
				    reference (string): An identifier that will be returned in the
				    request document to distinguish between different data sets. If this
				    attribute is left blank, a random string will be generated.
				  </li>
				  <li>
				    action (string): The operation to be performed on the requested
				    action.
				    <ul>
              <li>
                delete: Once an Item has been deleted from WorkXpress, it can
                only be retrieved by restoring an earlier backup. You should
                only delete Items if you know for sure that you will not need it
                in the future. Deleting an Item will also delete any
                Relationships to other Items.
              </li>
              <li>
                recycle: Recycled Items can be restored using the restore action
                (see below). When an Item is recycled, it will no longer be
                returned in search results; this includes (but is not limited
                to) Actions and List Layouts. All Relationships to other Items
                will also be recycled.
              </li>
              <li>
                restore: Restoring a recycled Item will make it available to
                searching again. Restoring an Item will also restore any
                recycled Relations to other Items.
              </li>
              <li>update: Updates an existing Item.</li>
            </ul>
				  </li>
				</ul>
			</td>
		</tr>
		<tr>
			<td>/wxRequest/dataSet/items</td>
			<td>Root node for the items that should be retrieved.</td>
		</tr>
		<tr>
			<td>/wxRequest/dataSet/items/item</td>
			<td>
			  A single item to be updated. There is no limit to the number of item
			  nodes allowed in a data set.
			  <br /><br />
				<em>Attributes:</em>
				<ul>
				  <li>
				    itemId (string): The item id of the item to update from. Should be
				    in the format u# (ie. u123).
				  </li>
				</ul>
			</td>
		</tr>
		<tr>
			<td>/wxRequest/dataSet/items/map</td>
			<td>The root node for a map definition.</td>
		</tr>
		<tr>
			<td>/wxRequest/dataSet/items/map/definition</td>
			<td>
			  The actual definition for a map. The map XML must have its HTML entities
			  encoded.
      </td>
		</tr>
		<tr>
			<td>/wxRequest/dataSet/fields</td>
			<td>
			  Root node for any fields that should be updated on the items that were
			  found in the items node.
      </td>
		</tr>
		<tr>
			<td>/wxRequest/dataSet/fields/field</td>
			<td>
			  A single field to update on the Item.
			  <br /><br />
				<em>Attributes:</em>
				<ul>
          <li>
            fieldId (string): Id of the field to set. Should be in the format a#
            (ie. a123).
          </li>
        </ul>
			</td>
		</tr>
		<tr>
			<td>/wxRequest/dataSet/fields/field/value</td>
			<td>Value to set into the field.</td>
		</tr>
		<tr>
			<td>/wxRequest/dataSet/relations</td>
			<td>
			  Root node for relations that should be added or updated with the current
			  item.
      </td>
		</tr>
		<tr>
			<td>/wxRequest/dataSet/relations/relation</td>
			<td>
			  Defines a single relation to be added or updated. If the action is not
			  "add", the attributes will be used to look up an existing relation.
			  <br /><br />
			  <em>Attributes:</em>
			  <ul>
          <li>
            action (string): The action to perform for this relation.
            <ul>
              <li>
                add: Creates a new relationship using the other attributes to
                define the new relationship.
              </li>
              <li>
                delete: Similar to items, deleted relationships are completely
                removed from WorkXpress and can only be retrieved by restoring a
                previous backup.
              </li>
              <li>
                recycle: Recycled relationships are <em>not</em> removed from
                WorkXpress and can be restored using the restore action.
              </li>
              <li>
                restore: Restores a relationship that was previously recycled.
              </li>
              <li>update: Updates an existing relation.</li>
            </ul>
          </li>
          <li>
            oppositeItemId (string): Id of the item on the opposite side of the
            relation. For example, if the item being updated is an account and
            you want to relate it to a contact (or update an existing
            relationship to a contact), this would be the id of the contact.
            Should be in the format u# (ie. u123).
          </li>
          <li>
            reference (string): An identifier that will be returned with the
            response to identify each relationship.
          </li>
          <li>
            relationType (string): Relation type of the relationship. Should be
            in the format a# (ie. a123).
          </li>
          <li>
            startingSide (string): Defines which side of the relation that the
            item defined above should be on. Valid values are base and target.
          </li>
        </ul>
			</td>
		</tr>
		<tr>
			<td>/wxRequest/dataSet/relations/relation/fields</td>
			<td>Root node for the fields that should be set on the relationship.</td>
		</tr>
		<tr>
			<td>/wxRequest/dataSet/relations/relation/fields/field</td>
			<td>
			  A single field to be set on the relationship.
			  <br /><br />
				<em>Attributes:</em>
				<ul>
          <li>
            fieldId (string): Id of the field to set. Should be in the format a# 
            ie. a123).
          </li>
        </ul>
			</td>
		</tr>
		<tr>
			<td>/wxRequest/dataSet/relations/relation/fields/field/value</td>
			<td>Value to set into the field.</td>
		</tr>
	</tbody>
</table>

<h3 id="response-xml">Response XML</h3>
<p>Now let’s get an understanding of how the response XML will be formed.</p>
<table class="workxpress-table">
	<thead>
		<tr>
			<th>Element</th>
			<th>Description</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>/wxResponse</td>
			<td>The root node for all response documents.</td>
		</tr>
		<tr>
			<td>/wxRequest/callStatus</td>
			<td>
			  The status of the SOAP call as it was processed by WorkXpress.
			  <br /><br />
				<em>Attributes:</em>
				<ul>
          <li>
            status (string): The call's status. Values include success and
            failure.
          </li>
        </ul>
			</td>
		</tr>
		<tr>
			<td>/wxResponse/compatibilityLevel</td>
			<td>The version of the API that was used to process the request.</td>
		</tr>
		<tr>
			<td>/wxRequest/dataSet</td>
			<td>
			  One data set is returned for each data set in the request document.
			  <br /><br />
				<em>Attributes:</em>
				<ul>
          <li>
            reference (string): The identifier that was assigned to the data set
            in the request.
          </li>
        </ul>
			</td>
		</tr>
		<tr>
			<td>/wxRequest/dataSet/item</td>
			<td>
			  Defines an item that was updated. One item node is returned for each
			  item that was updated by WorkXpress.
			  <br /><br />
				<em>Attributes:</em>
				<ul>
          <li>
            itemId (string): Id of the item that was updated, in the format u#
            (ie. u123).
          </li>
        </ul>
			</td>
		</tr>
		<tr>
			<td>/wxRequest/dataSet/item/relation</td>
			<td>
			  Defines a relationship that was added or updated. Returns one relation
			  node for each relationship from the item that was added or updated by
			  WorkXpress.
			  <br /><br />
			  <em>Attributes:</em>
			  <ul>
          <li>
            reference (string): The identifier of the relation that was assigned
            to the relation in the request.
          </li>
          <li>
            relationId (string): Id of the relation that was added or updated,
            in the format u# (ie. u123).
          </li>
        </ul>
			</td>
		</tr>
	</tbody>
</table>

<h3 id="examples">Examples</h3>
<p>Below is an example of a basic UpdateItem request document:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;wxrequest&gt;</span>
  <span class="nt">&lt;dataset</span> <span class="na">action=</span><span class="s">"update"</span> <span class="na">reference=</span><span class="s">"account_update"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;items&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">itemid=</span><span class="s">"u7563"</span><span class="nt">&gt;&lt;/item&gt;</span>
    <span class="nt">&lt;/items&gt;</span>
    <span class="nt">&lt;fields&gt;</span>
      <span class="nt">&lt;field</span> <span class="na">fieldid=</span><span class="s">"a66969"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;value&gt;</span>WorkXpress<span class="nt">&lt;/value&gt;</span>
      <span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;/fields&gt;</span>
    <span class="nt">&lt;relations&gt;</span>
      <span class="nt">&lt;relation</span> <span class="na">action=</span><span class="s">"update"</span> <span class="na">oppositeitemid=</span><span class="s">"u7436"</span> <span class="na">reference=</span><span class="s">"account_to_contact"</span> <span class="na">relationtype=</span><span class="s">"a36495"</span> <span class="na">startingside=</span><span class="s">"base"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;fields&gt;</span>
          <span class="nt">&lt;field</span> <span class="na">fieldid=</span><span class="s">"a36498"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;value&gt;</span>Intern<span class="nt">&lt;/value&gt;</span>
          <span class="nt">&lt;/field&gt;</span>
          <span class="nt">&lt;field</span> <span class="na">fieldid=</span><span class="s">"a36513"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;value&gt;</span>foo@example.com<span class="nt">&lt;/value&gt;</span>
          <span class="nt">&lt;/field&gt;</span>
        <span class="nt">&lt;/fields&gt;</span>
      <span class="nt">&lt;/relation&gt;</span>
    <span class="nt">&lt;/relations&gt;</span>
  <span class="nt">&lt;/dataset&gt;</span>
  <span class="nt">&lt;dataset</span> <span class="na">action=</span><span class="s">"recycle"</span> <span class="na">reference=</span><span class="s">"account_recycle"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;items&gt;&lt;map&gt;</span>
        <span class="nt">&lt;definition&gt;</span>
          <span class="ni">&amp;amp;</span>lt;?xml version="1.0" encoding="UTF-8"?<span class="ni">&amp;amp;</span>gt;
          <span class="ni">&amp;amp;</span>lt;wxQuery xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="wxQuery.xsd" id="root"<span class="ni">&amp;amp;</span>gt;
            <span class="ni">&amp;amp;</span>lt;data for="root"<span class="ni">&amp;amp;</span>gt;
              <span class="ni">&amp;amp;</span>lt;item/<span class="ni">&amp;amp;</span>gt;
            <span class="ni">&amp;amp;</span>lt;/data<span class="ni">&amp;amp;</span>gt;
            <span class="ni">&amp;amp;</span>lt;startingTypes<span class="ni">&amp;amp;</span>gt;
              <span class="ni">&amp;amp;</span>lt;startingType<span class="ni">&amp;amp;</span>gt;a5543<span class="ni">&amp;amp;</span>lt;/startingType<span class="ni">&amp;amp;</span>gt;
            <span class="ni">&amp;amp;</span>lt;/startingTypes<span class="ni">&amp;amp;</span>gt;
            <span class="ni">&amp;amp;</span>lt;paramGroup id="wx4adfb3c227d12"<span class="ni">&amp;amp;</span>gt;
              <span class="ni">&amp;amp;</span>lt;join<span class="ni">&amp;amp;</span>gt;and<span class="ni">&amp;amp;</span>lt;/join<span class="ni">&amp;amp;</span>gt;
              <span class="ni">&amp;amp;</span>lt;fieldSearch id="wx4adfb3d738a91"<span class="ni">&amp;amp;</span>gt;
                <span class="ni">&amp;amp;</span>lt;fieldId<span class="ni">&amp;amp;</span>gt;a39651<span class="ni">&amp;amp;</span>lt;/fieldId<span class="ni">&amp;amp;</span>gt;
                <span class="ni">&amp;amp;</span>lt;operator<span class="ni">&amp;amp;</span>gt;fieldLessThanEqualTo<span class="ni">&amp;amp;</span>lt;/operator<span class="ni">&amp;amp;</span>gt;
                <span class="ni">&amp;amp;</span>lt;input<span class="ni">&amp;amp;</span>gt;
                  <span class="ni">&amp;amp;</span>amp;lt;?xml version="1.0"?<span class="ni">&amp;amp;</span>amp;gt;
                  <span class="ni">&amp;amp;</span>amp;lt;search_value<span class="ni">&amp;amp;</span>amp;gt;
                    <span class="ni">&amp;amp;</span>amp;lt;first_value<span class="ni">&amp;amp;</span>amp;gt; -1 years <span class="ni">&amp;amp;</span>amp;lt;/first_value<span class="ni">&amp;amp;</span>amp;gt;
                  <span class="ni">&amp;amp;</span>amp;lt;/search_value<span class="ni">&amp;amp;</span>amp;gt;
                <span class="ni">&amp;amp;</span>lt;/input<span class="ni">&amp;amp;</span>gt;
              <span class="ni">&amp;amp;</span>lt;/fieldSearch<span class="ni">&amp;amp;</span>gt;
            <span class="ni">&amp;amp;</span>lt;/paramGroup<span class="ni">&amp;amp;</span>gt;
          <span class="ni">&amp;amp;</span>lt;/wxQuery<span class="ni">&amp;amp;</span>gt;
        <span class="nt">&lt;/definition&gt;&lt;/map&gt;</span>
    <span class="nt">&lt;/items&gt;</span>
  <span class="nt">&lt;/dataset&gt;</span>
<span class="nt">&lt;/wxrequest&gt;</span></code></pre></figure>

<p>Below is the corresponding response document for the above example:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;wxresponse&gt;</span>
  <span class="nt">&lt;callstatus</span> <span class="na">status=</span><span class="s">"success"</span><span class="nt">&gt;&lt;/callstatus&gt;</span>
  <span class="nt">&lt;compatibilitylevel&gt;</span>1<span class="nt">&lt;/compatibilitylevel&gt;</span>
  <span class="nt">&lt;dataset</span> <span class="na">reference=</span><span class="s">"account_update"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">itemid=</span><span class="s">"u7563"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;relation</span> <span class="na">reference=</span><span class="s">"account_to_contact"</span> <span class="na">relationid=</span><span class="s">"u7564"</span><span class="nt">&gt;&lt;/relation&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
  <span class="nt">&lt;/dataset&gt;</span>
  <span class="nt">&lt;dataset</span> <span class="na">reference=</span><span class="s">"account_recycle"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">itemid=</span><span class="s">"u1782"</span><span class="nt">&gt;&lt;/item&gt;</span>
  <span class="nt">&lt;/dataset&gt;</span>
<span class="nt">&lt;/wxresponse&gt;</span></code></pre></figure>

<p>If you have any questions or would like assistance making some UpdateItem
requests of your own, please feel free to comment below. My next post will be on
how to use the ExecuteAction request.</p>

    
<div class="share-btns">
  
 <h4>Share this post:</h4>


 
<a class="btn btn-small btn-sm twitter" href="http://twitter.com/share?text=Using the WorkXpress API: UpdateItem"
           onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <i class="fa fa-twitter fa-lg"></i>
          Twitter
        </a>

        <a class="btn btn-small btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <i class="fa fa-facebook fa-lg"></i>
          Facebook
        </a>

        <a class="btn btn-small btn-sm gplus"
           onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;">
          <i class="fa fa-google-plus fa-lg"></i>
          Google+
        </a>
 </a>

</div>   

<div class="comments">
   <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'jamesarmes';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    

</div> 

<div class="post-footer">
  
</div>
<hr/>


  
    <div class="post-navs row">
      
        <div class="col-md-6 post-nav">
            
          <h3 class="section-header">
            Older
            <span class="text-muted"> &middot; </span>
            <a href="/archive">View Archive (33)</a>
          </h3>
            
          <h2 class="post-title-link"><a href="/blog/2009/09/using-workxpress-api-additem">Using the WorkXpress API: AddItem</a></h2>
          <p><a href="http://www.workxpress.com"><img src="/assets/images/workxpress-logo.png" alt="WorkXpress" class="post-image image-right" /></a>
Earlier I introduced you to the
<a href="/blog/2009/07/introducing-workxpress-api">WorkXpress API</a>. If
you have not read it already you should do so before reading this post. Once you
have a basic understanding of what it is and how it works, it’s time to start
diving into the API.</p>


        </div>
      
      
        
        <div class="col-md-6 post-nav">
          <h3 class="section-header">
            Newer
            
          </h3>
            
          <h2 class="post-title-link"><a href="/blog/2009/10/using-workxpress-api-executeaction">Using the WorkXpress API: ExecuteAction</a></h2>
          <p><a href="http://www.workxpress.com"><img src="/assets/images/workxpress-logo.png" alt="WorkXpress" class="post-image image-right" /></a>
Earlier I introduced you to the
<a href="/blog/2009/07/introducing-workxpress-api">WorkXpress API</a>. If
you have not read it already you should do so before reading this post. Once you
have a basic understanding of what it is and how it works, it’s time to start
diving into the API.</p>


        </div>
      
    </div>
  

 

          <footer>
<hr/>
  <div class="left">
    &copy;2016
    James Armes.
  </div>

  <div class="right">
    
      <a href="https://twitter.com/jamesiarmes"><i class="fa fa-twitter fa-lg" style="color:#49B1F7;"></i></a>
    </a>
    
  </div>
</footer>

        </section>
    </div>   
    </div>
    <script src="/public/javascripts/jquery.min.js"></script>
    <script src="/public/javascripts/bootstrap.min.js"></script>
    <!-- disqus comment counter -->
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'jamesarmes';

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function () {
	    var s = document.createElement('script'); s.async = true;
	    s.type = 'text/javascript';
	    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
	    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
	}());
</script>
<!-- /disqus comment counter -->



<!-- google analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3412924-2', 'auto');
  ga('send', 'pageview');

</script>
<!-- /google analytics -->

  </body>
</html>
